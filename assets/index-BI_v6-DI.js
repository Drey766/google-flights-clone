import{a as T,r as y,j as e,A as k,S as D,P as A,B as I,F as E,L as F,C as $,b as L,c as O,d as M}from"./vendor-CeO2QkqJ.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))h(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const g of n.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function x(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function h(i){if(i.ep)return;i.ep=!0;const n=x(i);fetch(i.href,n)}})();const R="bffc3f93d7mshe05fa1364d0f30dp17e152jsn8f65c2a003da",B=async(c,a,x,h,i=1,n=0,g=0,d="economy")=>{var u,r,f,N;try{console.log("Flight search params:",{origin:c,destination:a,date:x,returnDate:h,adults:i,children:n,infants:g,travelClass:d});const p={originSkyId:c.id,destinationSkyId:a.id,originEntityId:c.entityId,destinationEntityId:a.entityId,date:x,cabinClass:d,adults:i.toString(),sortBy:"best",currency:"USD",market:"en-US",countryCode:"US"};h&&h.trim()!==""&&(p.returnDate=h),n>0&&(p.children=n.toString()),g>0&&(p.infants=g.toString()),console.log("Final API params:",p);const s={method:"GET",url:"https://sky-scrapper.p.rapidapi.com/api/v2/flights/searchFlights",params:p,headers:{"x-rapidapi-key":R,"x-rapidapi-host":"sky-scrapper.p.rapidapi.com"}},l=await T.request(s);if(console.log("Flight search API response:",l.data),!l.data)return console.error("No data received from flight search API"),[];let m=((u=l.data.data)==null?void 0:u.itineraries)||l.data.itineraries||((r=l.data.data)==null?void 0:r.flights)||l.data.flights||[];return console.log("Extracted itineraries:",m),Array.isArray(m)?m:(console.log("Itineraries is not an array, full response:",l.data),[])}catch(p){return console.error("Flight search failed:",{message:p.message,response:(f=p.response)==null?void 0:f.data,status:(N=p.response)==null?void 0:N.status,config:p.config}),[]}},P=async c=>{var a,x,h,i,n,g,d,u;try{const r=await T.get("https://sky-scrapper.p.rapidapi.com/api/v1/flights/searchAirport",{params:{query:c,locale:"en-US"},headers:{"X-RapidAPI-Key":"bffc3f93d7mshe05fa1364d0f30dp17e152jsn8f65c2a003da","X-RapidAPI-Host":"sky-scrapper.p.rapidapi.com"}});console.log(`Raw API response for ${c}:`,r.data);const f=r.data;if(!(f!=null&&f.status)||!Array.isArray(f.data))return console.error("Invalid data format from API",f),null;const N=f.data;console.log(`Airport suggestions for ${c}:`,N);const p=N.find(s=>{var l,m,j,C,o,v;return((m=(l=s.navigation)==null?void 0:l.relevantFlightParams)==null?void 0:m.skyId)&&((C=(j=s.navigation)==null?void 0:j.relevantFlightParams)==null?void 0:C.entityId)&&((v=(o=s.navigation)==null?void 0:o.relevantFlightParams)==null?void 0:v.flightPlaceType)==="AIRPORT"})||N.find(s=>{var l,m,j,C,o,v;return((m=(l=s.navigation)==null?void 0:l.relevantFlightParams)==null?void 0:m.skyId)&&((C=(j=s.navigation)==null?void 0:j.relevantFlightParams)==null?void 0:C.entityId)&&((v=(o=s.navigation)==null?void 0:o.relevantFlightParams)==null?void 0:v.flightPlaceType)==="CITY"});return p?(console.log(`Selected airport for ${c}:`,p),{city:((a=p.presentation)==null?void 0:a.title)||"",airportName:((x=p.presentation)==null?void 0:x.suggestionTitle)||((h=p.presentation)==null?void 0:h.title)||"",skyId:((n=(i=p.navigation)==null?void 0:i.relevantFlightParams)==null?void 0:n.skyId)||"",entityId:((d=(g=p.navigation)==null?void 0:g.relevantFlightParams)==null?void 0:d.entityId)||""}):(console.warn("No valid airport or city suggestion found for:",c),null)}catch(r){return console.error("Error searching airport:",((u=r.response)==null?void 0:u.data)||r.message),null}},U=({onSearch:c})=>{const[a,x]=y.useState({origin:"",destination:"",departureDate:"",returnDate:"",adults:1,children:0,infants:0,travelClass:"economy"}),[h,i]=y.useState("roundtrip"),[n,g]=y.useState(!1),[d,u]=y.useState(!1),[r,f]=y.useState({adults:a.adults,children:a.children,infants:a.infants}),N=t=>{x({...a,[t.target.name]:t.target.value})},p=t=>{i(t),t==="oneway"&&x({...a,returnDate:""})},s=(t,b)=>{f(w=>{const S=b==="add"?w[t]+1:Math.max(0,w[t]-1);return t==="adults"&&S<1||t==="infants"&&S>r.adults?w:{...w,[t]:S}})},l=()=>{x({...a,adults:r.adults,children:r.children,infants:r.infants}),u(!1)},m=()=>{f({adults:a.adults,children:a.children,infants:a.infants}),u(!1)},j=()=>a.adults+a.children+a.infants,C=()=>{const t=j();if(t===1)return"1";const b=[];return a.adults>0&&b.push(`${a.adults} adult${a.adults>1?"s":""}`),a.children>0&&b.push(`${a.children} child${a.children>1?"ren":""}`),a.infants>0&&b.push(`${a.infants} infant${a.infants>1?"s":""}`),`${t}`},o=()=>a.returnDate&&a.returnDate<a.departureDate?(alert("Return date must be after departure date"),!1):a.adults<1?(alert("At least 1 adult is required"),!1):!0,v=async t=>{if(t.preventDefault(),o()){g(!0);try{await c(a)}finally{g(!1)}}};return e.jsx("section",{className:"searchFormContainer",children:e.jsxs("form",{className:"searchForm",onSubmit:v,children:[e.jsxs("div",{className:"trip-selections",children:[e.jsxs("div",{className:"input-group dropdown-menus",children:[e.jsx("label",{htmlFor:"tripType",className:"tripType-label",children:h=="oneway"?e.jsx(k,{}):e.jsx(D,{})}),e.jsxs("select",{id:"tripType",name:"tripType",value:h,onChange:t=>p(t.target.value),className:"trip-type-dropdown",children:[e.jsx("option",{value:"roundtrip",className:"tripType-option",children:"Round Trip"}),e.jsx("option",{value:"oneway",className:"tripType-option",children:"One Way"})]})]}),e.jsx("div",{className:"input-group passenger-dropdown",children:e.jsxs("div",{className:"passenger-field-container",children:[e.jsxs("div",{className:"passenger-field",onClick:()=>u(!d),children:[e.jsx("label",{className:"passenger-label",children:e.jsx(A,{})}),e.jsx("span",{className:"passanger-text",children:C()}),e.jsx("span",{className:"dropdown-arrow",children:d?"▲":"▼"})]}),d&&e.jsxs("div",{className:"passenger-options",children:[e.jsxs("div",{className:"passenger-row",children:[e.jsxs("div",{className:"passenger-info",children:[e.jsx("span",{children:"Adults"}),e.jsx("small",{children:"12+ years"})]}),e.jsxs("div",{className:"passenger-controls",children:[e.jsx("button",{type:"button",className:"passenger-button",onClick:()=>s("adults","subtract"),disabled:r.adults<=1,children:"-"}),e.jsx("span",{children:r.adults}),e.jsx("button",{type:"button",className:"passenger-button",onClick:()=>s("adults","add"),disabled:r.adults>=9,children:"+"})]})]}),e.jsxs("div",{className:"passenger-row",children:[e.jsxs("div",{className:"passenger-info",children:[e.jsx("span",{children:"Children"}),e.jsx("small",{children:"2-11 years"})]}),e.jsxs("div",{className:"passenger-controls",children:[e.jsx("button",{type:"button",onClick:()=>s("children","subtract"),disabled:r.children<=0,className:"passenger-button",children:"-"}),e.jsx("span",{children:r.children}),e.jsx("button",{type:"button",onClick:()=>s("children","add"),disabled:r.children>=9,className:"passenger-button",children:"+"})]})]}),e.jsxs("div",{className:"passenger-row",children:[e.jsxs("div",{className:"passenger-info",children:[e.jsx("span",{children:"Infants"}),e.jsx("small",{children:"Under 2 years"})]}),e.jsxs("div",{className:"passenger-controls",children:[e.jsx("button",{type:"button",onClick:()=>s("infants","subtract"),disabled:r.infants<=0,className:"passenger-button",children:"-"}),e.jsx("span",{children:r.infants}),e.jsx("button",{type:"button",onClick:()=>s("infants","add"),disabled:r.infants>=r.adults,className:"passenger-button",children:"+"})]})]}),e.jsxs("div",{className:"passenger-actions",children:[e.jsx(I,{className:"passengerAction-button",onClick:m,children:"Cancel"}),e.jsx(I,{className:"passengerAction-button",onClick:l,children:"OK"})]})]})]})}),e.jsxs("div",{className:"input-group dropdown-menus",children:[e.jsx("label",{htmlFor:"travelClass",className:"travelClass-label",children:e.jsx(E,{})}),e.jsxs("select",{id:"travelClass",name:"travelClass",value:a.travelClass,onChange:N,className:"travelClass-dropdown",children:[e.jsx("option",{value:"economy",children:"Economy"}),e.jsx("option",{value:"premium_economy",children:"Premium Economy"}),e.jsx("option",{value:"business",children:"Business"}),e.jsx("option",{value:"first",children:"First Class"})]})]})]}),e.jsxs("div",{className:"trip-inputs",children:[e.jsxs("div",{className:"trip-location",children:[e.jsxs("div",{className:"input-group location-input",children:[e.jsxs("label",{htmlFor:"origin",className:"location-label",children:[e.jsx(F,{})," "]}),e.jsx("input",{id:"origin",name:"origin",className:"location-input-field",value:a.origin,onChange:N,placeholder:"Where from?",required:!0})]}),e.jsxs("div",{className:"input-group location-input",children:[e.jsxs("label",{htmlFor:"destination",className:"location-label",children:[e.jsx(F,{})," "]}),e.jsx("input",{id:"destination",name:"destination",value:a.destination,className:"location-input-field",onChange:N,placeholder:"Where to?",required:!0})]})]}),e.jsxs("div",{className:"trip-dates",children:[e.jsxs("div",{className:"input-group date-input",children:[e.jsxs("label",{htmlFor:"departureDate",className:"date-label",children:[e.jsx($,{})," "]}),e.jsx("input",{id:"departureDate",className:"date-input-field",name:"departureDate",type:"text",placeholder:"Depature date",onFocus:t=>t.currentTarget.type="date",onBlur:t=>{t.currentTarget.value||(t.currentTarget.type="text")},value:a.departureDate,onChange:N,min:new Date().toISOString().split("T")[0],required:!0})]}),h==="roundtrip"&&e.jsxs("div",{className:"input-group date-input",children:[e.jsxs("label",{htmlFor:"returnDate",className:"date-label",children:[e.jsx(L,{})," "]}),e.jsx("input",{id:"returnDate",className:"date-input-field",name:"returnDate",type:"text",placeholder:"Return date",onFocus:t=>t.currentTarget.type="date",onBlur:t=>{t.currentTarget.value||(t.currentTarget.type="text")},value:a.returnDate,onChange:N,min:a.departureDate||new Date().toISOString().split("T")[0]})]})]})]}),e.jsx("div",{className:"search-button-container",children:e.jsx(I,{type:"submit",disabled:n,className:"search-button",children:n?"Searching...":"Explore"})})]})})},_=({flights:c})=>{const[a,x]=y.useState(new Set),[h,i]=y.useState("score"),n=y.useMemo(()=>!c||c.length===0?[]:[...c].sort((s,l)=>{var m,j,C,o;if(h==="price"){const v=parseFloat(((j=(m=s.price)==null?void 0:m.formatted)==null?void 0:j.replace(/[$,]/g,""))||"0"),t=parseFloat(((o=(C=l.price)==null?void 0:C.formatted)==null?void 0:o.replace(/[$,]/g,""))||"0");return v-t}else if(h==="score")return(l.score||0)-(s.score||0);return 0}),[c,h]);if(!c||c.length===0)return e.jsx("div",{className:"no-flights",children:"No flights found"});const g=s=>{const l=new Set(a);l.has(s)?l.delete(s):l.add(s),x(l)},d=s=>{const l=Math.floor(s/60),m=s%60;return`${l}h ${m}m`},u=s=>new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),r=s=>new Date(s).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),f=s=>s===0?"Nonstop":s===1?"1 stop":`${s} stops`,N=s=>{var l;return(l=s.carriers)!=null&&l.marketing&&s.carriers.marketing.length>0?s.carriers.marketing[0]:null},p=s=>{if(s.durationInMinutes)return d(s.durationInMinutes);const l=new Date(s.departure),m=new Date(s.arrival),j=Math.floor((m.getTime()-l.getTime())/(1e3*60));return d(j)};return e.jsxs("section",{className:"flightList-container",children:[e.jsxs("div",{className:"flightList-sortContainer",children:[e.jsx("h3",{className:"sort-title",children:h=="price"?"Cheapest Departing Flights":"Best Departing Flights"}),e.jsxs("div",{className:"sort-container",children:[e.jsx("span",{className:"sort-text",children:"Sort by:"}),e.jsxs("select",{value:h,onChange:s=>i(s.target.value),className:"sort-select",children:[e.jsx("option",{value:"price",children:"Price (Low to High)"}),e.jsx("option",{value:"score",children:"Best Match"})]})]})]}),e.jsx("ul",{className:"flights-list",children:n.map((s,l)=>{var C;const m=s.id||`flight-${l}`,j=a.has(m);return e.jsxs("li",{className:"flight-card",children:[e.jsxs("div",{className:"flight-row",children:[s.legs&&s.legs.length>0&&(()=>{const o=s.legs[0],v=N(o);return e.jsxs("div",{className:"flight-leg-row",children:[e.jsx("div",{className:"carrier-logo",children:v&&e.jsx("img",{src:v.logoUrl,alt:v.name,width:"32",height:"32",onError:t=>{t.currentTarget.style.display="none"}})}),e.jsxs("div",{className:"flight-times",children:[e.jsxs("div",{className:"departure-time",children:[e.jsx("span",{className:"time",children:u(o.departure)}),e.jsx("span",{className:"airport",children:o.origin.displayCode})]}),e.jsx("span",{children:"-"}),e.jsxs("div",{className:"arrival-time",children:[e.jsx("span",{className:"time",children:u(o.arrival)}),e.jsx("span",{className:"airport",children:o.destination.displayCode})]})]}),e.jsx("div",{className:"flight-path",children:j?e.jsx(I,{className:"selectFlight-button",children:"Select Flight"}):e.jsxs("div",{className:"flight-pth-container",children:[e.jsxs("div",{className:"duration",children:[e.jsx("span",{children:d(o.durationInMinutes)}),e.jsxs("span",{className:"duration-location",children:[o.origin.displayCode," - ",o.destination.displayCode]})]}),e.jsxs("div",{className:"stops",children:[e.jsx("span",{children:f(o.stopCount)}),e.jsx("span",{children:o.segments&&o.segments.map((t,b)=>b<o.segments.length-1?e.jsx("div",{className:"stops-layover",children:t.destination.displayCode},t.id||b):null)})]})]})})]})})(),e.jsxs("div",{className:"flight-actions",children:[e.jsx("div",{className:"price",children:e.jsx("span",{className:"amount",children:((C=s.price)==null?void 0:C.formatted)||"N/A"})}),e.jsx("div",{className:"action-buttons",children:e.jsx("button",{className:"details-toggle",onClick:()=>g(m),children:e.jsx("span",{className:`arrow ${j?"expanded":""}`,children:"▼"})})})]})]}),e.jsx("div",{className:`flight-details ${j?"expanded":"collapsed"}`,children:s.legs&&s.legs.map((o,v)=>e.jsxs("div",{className:"leg-details",children:[e.jsxs("div",{className:"leg-header",children:[e.jsxs("h4",{children:[v===0?"Departure":"Return"," • ",r(o.departure)]}),e.jsxs("span",{className:"total-time",children:["Total time: ",d(o.durationInMinutes)]})]}),e.jsx("div",{className:"segments-timeline",children:o.segments&&o.segments.map((t,b)=>{var w,S;return e.jsxs("div",{className:"segment-timeline",children:[e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-dot departure-dot"}),e.jsx("div",{className:"timeline-content",children:e.jsxs("div",{className:"time-info",children:[e.jsx("span",{className:"time",children:u(t.departure)}),e.jsxs("span",{className:"airport-name",children:[t.origin.name," (",t.origin.displayCode,")"]})]})})]}),e.jsxs("div",{className:"timeline-travel",children:[e.jsx("span",{className:"travel-line"}),e.jsxs("div",{className:"travel-time",children:["Travel time: ",p(t)]})]}),e.jsxs("div",{className:"timeline-item",children:[e.jsx("div",{className:"timeline-dot arrival-dot"}),e.jsxs("div",{className:"timeline-content",children:[e.jsxs("div",{className:"time-info",children:[e.jsx("span",{className:"time",children:u(t.arrival)}),e.jsxs("span",{className:"airport-name",children:[t.destination.name," (",t.destination.displayCode,")"]})]}),e.jsxs("div",{className:"flight-info",children:[e.jsxs("span",{className:"flight-number",children:[(w=t.marketingCarrier)==null?void 0:w.name," ",t.flightNumber]}),t.operatingCarrier&&t.operatingCarrier.id!==((S=t.marketingCarrier)==null?void 0:S.id)&&e.jsxs("span",{className:"operated-by",children:["Operated by ",t.operatingCarrier.name]})]})]})]}),b<o.segments.length-1&&e.jsxs("div",{className:"layover-info",children:[e.jsx("div",{className:"layover-dot"}),e.jsxs("div",{className:"layover-text",children:[e.jsx("span",{}),"Layover in ",t.destination.name]})]})]},t.id||b)})}),s.farePolicy&&e.jsx("div",{className:"fare-info",children:e.jsxs("div",{className:"fare-details",children:[e.jsxs("span",{className:`policy-item ${s.farePolicy.isChangeAllowed?"allowed":"not-allowed"}`,children:[s.farePolicy.isChangeAllowed?"✓":"✗"," Changes"]}),e.jsxs("span",{className:`policy-item ${s.farePolicy.isCancellationAllowed?"allowed":"not-allowed"}`,children:[s.farePolicy.isCancellationAllowed?"✓":"✗"," Cancellation"]})]})})]},o.id||v))})]},m)})})]})},H="/google-flights-clone/assets/flights_nc_dark_theme_4-DGZafy2O.svg",K=()=>{const[c,a]=y.useState([]),[x,h]=y.useState(!1),[i,n]=y.useState(null),g=async d=>{console.log("Starting flight search with params:",d),h(!0),n(null),a([]);try{console.log("Searching for airports...");const[u,r]=await Promise.all([P(d.origin),P(d.destination)]);if(console.log("Origin airport result:",u),console.log("Destination airport result:",r),!u){n(`Could not find airport information for origin: "${d.origin}". Please try a different city or airport name.`);return}if(!r){n(`Could not find airport information for destination: "${d.destination}". Please try a different city or airport name.`);return}if(!u.skyId||!u.entityId){n("Origin airport data is incomplete. Please try a different origin.");return}if(!r.skyId||!r.entityId){n("Destination airport data is incomplete. Please try a different destination.");return}console.log("Searching for flights...");const f=await B({id:u.skyId,entityId:u.entityId},{id:r.skyId,entityId:r.entityId},d.departureDate,d.returnDate,d.adults||1,d.children||0,d.infants||0,d.travelClass||"economy");console.log("Flight search results:",f),f.length===0?n(`No flights found from ${u.city} to ${r.city} on the selected dates. Try different dates or destinations.`):(a(f),console.log(`Found ${f.length} flights`))}catch(u){console.error("Error in flight search process:",u),n("An unexpected error occurred while searching for flights. Please try again.")}finally{h(!1)}};return e.jsxs("div",{className:"flights-container",children:[e.jsxs("div",{className:"fligthscloneImgCont",children:[e.jsx("img",{src:H,alt:"flights-image"}),e.jsx("div",{className:"flights-title",children:e.jsx("h1",{className:"flights-h1",children:"Flights"})})]}),e.jsx(U,{onSearch:g}),x&&e.jsxs("div",{className:"loading-container",children:[e.jsx(O,{}),e.jsx("p",{children:"Searching for flights..."}),e.jsx("p",{children:"This may take a few moments..."})]}),i&&e.jsx("div",{className:"error-container",children:e.jsx("p",{className:"error-message",children:i})}),!x&&!i&&c.length===0&&e.jsx("div",{className:"no-results",children:e.jsx("p",{children:"Enter your travel details above to search for flights."})}),c.length>0&&e.jsxs("div",{className:"results-container",children:[e.jsxs("h2",{className:"results-title",children:["Found ",c.length," flights"]}),e.jsx(_,{flights:c})]})]})},W=()=>{const[c,a]=y.useState(!1),x=()=>{a(!c)},h=()=>{a(!1)};return y.useEffect(()=>{const i=()=>{window.innerWidth>640&&a(!1)},n=g=>{const d=document.querySelector(".header");d&&!d.contains(g.target)&&a(!1)};return window.addEventListener("resize",i),document.addEventListener("click",n),()=>{window.removeEventListener("resize",i),document.removeEventListener("click",n)}},[]),e.jsxs("header",{className:"header",children:[e.jsxs("div",{className:"logo",children:[e.jsx("span",{children:"✈️"})," Flights"]}),e.jsx("button",{className:"menu-toggle",onClick:x,"aria-label":"Toggle navigation menu","aria-expanded":c,children:c?"✕":"☰"}),e.jsxs("nav",{className:`nav ${c?"open":""}`,role:"navigation","aria-label":"Main navigation",children:[e.jsx("a",{href:"#",onClick:h,children:"Flights"}),e.jsx("a",{href:"#",onClick:h,children:"Hotels"}),e.jsx("a",{href:"#",onClick:h,children:"Cars"})]})]})};function q(){return e.jsx(e.Fragment,{children:e.jsxs("main",{className:"main",children:[e.jsx(W,{}),e.jsx(K,{})]})})}M.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(q,{})}));
